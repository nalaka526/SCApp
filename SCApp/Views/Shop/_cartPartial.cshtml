@model SCApp.ViewModels.ShoppingCartViewModel
<div id="divCart">
    @if (Model.Items.Any())
    {

        <table class="table">
            <tr>
                <th>
                    Item
                </th>
                <th>
                    Price
                </th>
                <th>
                    Quantity
                </th>
                <th>
                    Total
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model.Items)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.ItemName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.UnitPrice)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Quantity)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.LineTotal)
                    </td>
                    <td>
                        <a href="#" class="remove-link" data-id="@item.ItemId">Remove</a>
                    </td>
                </tr>
            }

        </table>
    }
    else
    {
        <div>No items in cart</div>
    }

    <div>Total : <span><b>@Model.Total</b></span></div>

    <script type="text/javascript">

        $(function () {
            $(".remove-link").click(function () {
                $.post("/shop/removeitem", { "itemId": $(this).attr("data-id") })
                    .done(function () {
                        $("#divCart").load('@Url.Action("CartPartial","Shop")');
                        alert("Item removed");
                    })
                    .fail(function () { alert("Error") });
            })
        });

    </script>
</div>

